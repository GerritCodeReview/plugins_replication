{
  "comments": [
    {
      "key": {
        "uuid": "e1ff3efd_22d224b7",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/Destination.java",
        "patchSetId": 3
      },
      "lineNbr": 617,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2019-10-15T12:54:25Z",
      "side": 1,
      "message": "While this works it looks more like a workaround than a proper solution.\nThe call stack is:\n\n  firePendingEvents \u003e onGitReferenceUpdated \u003e wouldPushRef\n\nHowever, pushing all refs is actually never triggered as a result of processing a ref-updated\nevent. Therefore, it also shouldn\u0027t be replayed using this mechanism. Having said that,\nI believe that this is an issue introduced in [1] and not in this change.\n\nIMHO, replaying of the push-all tasks shouldn\u0027t (ab)use the onGitReferenceUpdated code path.\n\n[1] https://gerrit-review.googlesource.com/c/plugins/replication/+/235592",
      "revId": "3ddf835c203565dbd415f468e0d40eac1b815c63",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70db3545_a4652aa6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/Destination.java",
        "patchSetId": 3
      },
      "lineNbr": 617,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2019-10-15T13:18:50Z",
      "side": 1,
      "message": "While I agree with you, that\u0027s an existing naming problem, and I don\u0027t think this fix is related. The naming is improved in the next change where it is related.",
      "parentUuid": "e1ff3efd_22d224b7",
      "revId": "3ddf835c203565dbd415f468e0d40eac1b815c63",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a083fb5_0553ad19",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/Destination.java",
        "patchSetId": 3
      },
      "lineNbr": 617,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2019-10-15T13:25:29Z",
      "side": 1,
      "message": "What I don\u0027t like is not related to naming but on using the onGitReferenceUpdated\nmethod to replay something that wasn\u0027t triggered by a ref-updated event.\nIMHO a proper fix would be to replay the \u0027..all..\u0027 events using a different code path.",
      "parentUuid": "70db3545_a4652aa6",
      "revId": "3ddf835c203565dbd415f468e0d40eac1b815c63",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a714e04_339d7c72",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/Destination.java",
        "patchSetId": 3
      },
      "lineNbr": 617,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2019-10-15T13:50:57Z",
      "side": 1,
      "message": "I don\u0027t understand your comment, and is it related to this fix? This fix has nothing to do with the outside callers, this method is broken and this change fixes it right?",
      "parentUuid": "3a083fb5_0553ad19",
      "revId": "3ddf835c203565dbd415f468e0d40eac1b815c63",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}