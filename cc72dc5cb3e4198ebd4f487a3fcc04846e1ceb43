{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5e69c532_64ea65d8",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/DestinationConfigParser.java",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-09-01T18:44:14Z",
      "side": 0,
      "message": "@marcin, I think it should still have at least *one* push refSpec to be considered a valid push replication.\n\nFor me this is the spectrum of possibilities:\n\n- It has only one (or more) push refSpec: it is a valid destination\n- It has one (or more) push refSpec \u0026\u0026 possibly one (or more) fetch refSpec: it is still a valid destination\n- It has NO push refspec and no fetch refspec: it should be considered a destination, as this is the default.\n- it has NO push refspec BUT it has fetch refspec: it should NOT be considered a destination.\n\nWDYT?",
      "range": {
        "startLine": 59,
        "startChar": 0,
        "endLine": 62,
        "endChar": 7
      },
      "revId": "cc72dc5cb3e4198ebd4f487a3fcc04846e1ceb43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecfc59c5_86750ea9",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/DestinationConfigParser.java",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-09-01T18:50:07Z",
      "side": 0,
      "message": "I\u0027m not sure. For replication plugin we want to keep \"backward compatibility\" and just add extra parameters for pull-replication. This means that when there is NO push refspec we should use defaults even if there is a fetch refspec.",
      "parentUuid": "5e69c532_64ea65d8",
      "range": {
        "startLine": 59,
        "startChar": 0,
        "endLine": 62,
        "endChar": 7
      },
      "revId": "cc72dc5cb3e4198ebd4f487a3fcc04846e1ceb43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3192df95_923f112e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/DestinationConfigParser.java",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-09-01T18:52:00Z",
      "side": 0,
      "message": "If this is the case then, what configuration would allow to enable pull-replication only?",
      "parentUuid": "ecfc59c5_86750ea9",
      "range": {
        "startLine": 59,
        "startChar": 0,
        "endLine": 62,
        "endChar": 7
      },
      "revId": "cc72dc5cb3e4198ebd4f487a3fcc04846e1ceb43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a52aefc5_0a87354a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/DestinationConfigParser.java",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-09-01T18:58:02Z",
      "side": 0,
      "message": "For now there is no such a configuration because pull-replication should always work with replication. Pull-replication is not providing full functionality of replication plugin. But if you really want to disable replication for some pull-replication configuration you have to do it explicitly with something like push \u003d NON_EXISTING_REF. In the future when pull-replication will contain full functionality we can apply logic of discarding destinations when push param is not set.",
      "parentUuid": "3192df95_923f112e",
      "range": {
        "startLine": 59,
        "startChar": 0,
        "endLine": 62,
        "endChar": 7
      },
      "revId": "cc72dc5cb3e4198ebd4f487a3fcc04846e1ceb43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}