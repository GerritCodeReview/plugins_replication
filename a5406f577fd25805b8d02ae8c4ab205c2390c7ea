{
  "comments": [
    {
      "key": {
        "uuid": "f100698e_1481e7ad",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 49
      },
      "lineNbr": 80,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2020-03-13T14:58:01Z",
      "side": 1,
      "message": "I believe that this either broke the AutoReloadConfigDecorator.onReload method [1]\nor forgot to remove that method (and its @Subscribe annotation)?!\n\nMethod [1] is subscribed to ReplicationFileBasedConfig event but with this change\nthere is no place in the replication plugin which posts this type of event.\n\n[1] https://gerrit.googlesource.com/plugins/replication/+/a5406f577fd25805b8d02ae8c4ab205c2390c7ea/src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadConfigDecorator.java#101",
      "revId": "a5406f577fd25805b8d02ae8c4ab205c2390c7ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a0797cc_e2b99f77",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 49
      },
      "lineNbr": 80,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-03-13T15:04:40Z",
      "side": 1,
      "message": "How can the test be passing then?",
      "parentUuid": "f100698e_1481e7ad",
      "revId": "a5406f577fd25805b8d02ae8c4ab205c2390c7ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8597b7f_63e91b27",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 49
      },
      "lineNbr": 80,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-03-13T15:07:51Z",
      "side": 1,
      "message": "It works because it is DestinationsCollection.java:L246 that the event is consumed. I believe the @Subscribe on AutoReloadConfigDecorator is stale.",
      "parentUuid": "9a0797cc_e2b99f77",
      "revId": "a5406f577fd25805b8d02ae8c4ab205c2390c7ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "239e1034_1d9debdd",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 49
      },
      "lineNbr": 80,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2020-03-13T15:24:35Z",
      "side": 1,
      "message": "With this change only \"[remote ...]\" sections are reload-able. Any configuration changes\ndone in other sections ([gerrit] and [replication]) are not reload-able because\nthe AutoReloadConfigDecorator is never notified when replication configuration gets changed.",
      "parentUuid": "e8597b7f_63e91b27",
      "revId": "a5406f577fd25805b8d02ae8c4ab205c2390c7ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "820961aa_8ae6f4a9",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 49
      },
      "lineNbr": 80,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-03-13T15:31:14Z",
      "side": 1,
      "message": "I think that\u0027s an existing issue. See https://gerrit-review.googlesource.com/c/plugins/replication/+/257432",
      "parentUuid": "239e1034_1d9debdd",
      "revId": "a5406f577fd25805b8d02ae8c4ab205c2390c7ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43963967_80391289",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 49
      },
      "lineNbr": 80,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2020-03-13T15:40:53Z",
      "side": 1,
      "message": "\u003e I think that\u0027s an existing issue. See https://gerrit-review.googlesource.com/c/plugins/replication/+/257432\n\nOh, this is yet another issue that you are fixing in that change.\nHowever, I am talking about auto-reload-ing of the repication.config after the plugin already\nstarted. The AutoReloadConfigDecorator.onReload is never called and thus the\nAutoReloadconfigDecorator.currentConfig is never updated.\nInstead, the DestinationsCollection.onReload is invoked but it only reloads the \"remote\"\nsections. Any changes in other sections are not reloaded.",
      "parentUuid": "820961aa_8ae6f4a9",
      "revId": "a5406f577fd25805b8d02ae8c4ab205c2390c7ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c8f4faf_6fa3492b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 49
      },
      "lineNbr": 80,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-03-13T15:44:29Z",
      "side": 1,
      "message": "\u003e \u003e I think that\u0027s an existing issue. See https://gerrit-review.googlesource.com/c/plugins/replication/+/257432\n\u003e \n\u003e Oh, this is yet another issue that you are fixing in that change.\n\u003e However, I am talking about auto-reload-ing of the repication.config after the plugin already\n\u003e started. The AutoReloadConfigDecorator.onReload is never called and thus the\n\u003e AutoReloadconfigDecorator.currentConfig is never updated.\n\u003e Instead, the DestinationsCollection.onReload is invoked but it only reloads the \"remote\"\n\u003e sections. Any changes in other sections are not reloaded.\n\nGot it, thanks. Yeah, I just uploaded a few changes to the 2.16/3.1/master branches that clean up a few things. We\u0027ve managed to backport the master branch to work with out 2.7 core fork so we\u0027re running that in production and it turned up a few issues. But, I guess it\u0027s cool we\u0027re probably one of the only folks in the world running master replication?\n\nWe don\u0027t reload replication to pick up config changes, so we wouldn\u0027t see that issue.",
      "parentUuid": "43963967_80391289",
      "revId": "a5406f577fd25805b8d02ae8c4ab205c2390c7ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "54506b34_85286440",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 49
      },
      "lineNbr": 80,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-03-13T15:52:02Z",
      "side": 1,
      "message": "\u003e Any changes in other sections are not reloaded.\n\n@Sa≈°a I believe you are right, only the remotes are reloaded and not the other changes.\nIs there already a bug raised on this? If not, we should raise it.",
      "parentUuid": "2c8f4faf_6fa3492b",
      "revId": "a5406f577fd25805b8d02ae8c4ab205c2390c7ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d4b5d4bd_1320d1b5",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 49
      },
      "lineNbr": 80,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2020-03-13T16:06:11Z",
      "side": 1,
      "message": "OK, I created an issue:\n\nhttps://bugs.chromium.org/p/gerrit/issues/detail?id\u003d12462",
      "parentUuid": "54506b34_85286440",
      "revId": "a5406f577fd25805b8d02ae8c4ab205c2390c7ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}