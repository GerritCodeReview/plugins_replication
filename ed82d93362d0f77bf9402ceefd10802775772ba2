{
  "comments": [
    {
      "key": {
        "uuid": "29dfc557_a6d60b09",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationTasksStorage.java",
        "patchSetId": 5
      },
      "lineNbr": 167,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-10-25T08:38:46Z",
      "side": 1,
      "message": "I believe the two files (tmp and final) should be on the same directory to make sure that they are on the same filesystem.",
      "range": {
        "startLine": 167,
        "startChar": 19,
        "endLine": 167,
        "endChar": 82
      },
      "revId": "ed82d93362d0f77bf9402ceefd10802775772ba2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "330a24e0_b84a057e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationTasksStorage.java",
        "patchSetId": 5
      },
      "lineNbr": 167,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2019-10-25T15:01:31Z",
      "side": 1,
      "message": "This is a good concern. If we want to keep atomic moves in the same directory, we will need to use extensions instead of directories to categorize things such as temporary, waiting, running... This is safer way to ensure the same filesystem, however it does suffer from the downside of increasing the size of directory listings (x factor of 3 likely). Is this something we are willing to live with?",
      "parentUuid": "29dfc557_a6d60b09",
      "range": {
        "startLine": 167,
        "startChar": 19,
        "endLine": 167,
        "endChar": 82
      },
      "revId": "ed82d93362d0f77bf9402ceefd10802775772ba2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8b768ad_ee865726",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationTasksStorage.java",
        "patchSetId": 5
      },
      "lineNbr": 167,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-10-25T15:04:39Z",
      "side": 1,
      "message": "Why don\u0027t we create an \"invisible\" temporary subdirectory (\".tmp\") so that we are sure that are on the same filesystem?\n\nIt would account for just +1 on the normal listing and will satisfy the atomicity.",
      "parentUuid": "330a24e0_b84a057e",
      "range": {
        "startLine": 167,
        "startChar": 19,
        "endLine": 167,
        "endChar": 82
      },
      "revId": "ed82d93362d0f77bf9402ceefd10802775772ba2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}