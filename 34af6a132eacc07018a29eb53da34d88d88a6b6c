{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "daa608e0_b89801e6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/FanoutConfigResource.java",
        "patchSetId": 5
      },
      "lineNbr": 74,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2024-02-21T17:36:53Z",
      "side": 1,
      "message": "I think we could do the `load()`ing unconditionally here, without checking whether the remote file exists. From the jgit docs [1].\n\n```\nIf the file does not exist, this configuration is cleared, and thus\nbehaves the same as though the file exists, but is empty.\n```\n\n[1] https://eclipse.gerrithub.io/plugins/gitiles/eclipse-jgit/jgit/+/refs/heads/stable-6.7/org.eclipse.jgit/src/org/eclipse/jgit/storage/file/FileBasedConfig.java#124",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 30
      },
      "revId": "34af6a132eacc07018a29eb53da34d88d88a6b6c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f890739d_6b1140c7",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/FanoutConfigResource.java",
        "patchSetId": 5
      },
      "lineNbr": 81,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2024-02-21T17:36:53Z",
      "side": 1,
      "message": "if the current `$remote.config` contained a `[remote \"foo\"]` configuration and `updates` no longer had that, wouldn\u0027t that remote just be left stale in the `$remote.config`?\n\nSame question for the `FileConfigResource.update`.\n\nApologies if this is dealt with somewhere, but I couldn\u0027t find any logic for this, nor any test addressing deletions.",
      "range": {
        "startLine": 81,
        "startChar": 0,
        "endLine": 81,
        "endChar": 63
      },
      "revId": "34af6a132eacc07018a29eb53da34d88d88a6b6c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c96ca455_ce5a28e6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/FanoutConfigResource.java",
        "patchSetId": 5
      },
      "lineNbr": 84,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2024-02-21T17:36:53Z",
      "side": 1,
      "message": "nit: I think I understand why we are always using `setStringList` and `setStringList` here, as opposed to `setInt`, `setBool`, etc, because it allows us to cope with all types in any cardinality. \n\nHowever I think it might be misleading (it was for me ðŸ˜Š), because it looks like we are always getting and setting list of values here, which is not the case.\n\nPerhaps a quick comment explaining this gotcha would help, feel free to ignore though.",
      "range": {
        "startLine": 84,
        "startChar": 8,
        "endLine": 84,
        "endChar": 69
      },
      "revId": "34af6a132eacc07018a29eb53da34d88d88a6b6c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd1bcd00_117cf1ca",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/FanoutConfigResource.java",
        "patchSetId": 5
      },
      "lineNbr": 89,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2024-02-21T17:36:53Z",
      "side": 1,
      "message": "In a real case scenario, is it possible that `updates` contain anything other than `remote`?",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 89,
        "endChar": 27
      },
      "revId": "34af6a132eacc07018a29eb53da34d88d88a6b6c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4fe3843_bf5d4700",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationRemotesUpdater.java",
        "patchSetId": 5
      },
      "lineNbr": 50,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2024-02-21T17:36:53Z",
      "side": 1,
      "message": "updates",
      "range": {
        "startLine": 50,
        "startChar": 13,
        "endLine": 50,
        "endChar": 19
      },
      "revId": "34af6a132eacc07018a29eb53da34d88d88a6b6c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b8e7a77_bd795bd7",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationRemotesUpdater.java",
        "patchSetId": 5
      },
      "lineNbr": 76,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2024-02-21T17:36:53Z",
      "side": 1,
      "message": "nit: the same config object is sometimes named `configUpdates`, and sometimes `remoteConfig`. Yet other names (i.e. `updates`) is used in {File|Fanout}ConfigResource.\n\nConsider sticking to one for consistency.\n\nI lean towards `remoteConfig`, as opposed to `configUpdates` to make it obvious that it is not just a delta. imho, `updatedConfig` would also do.",
      "range": {
        "startLine": 76,
        "startChar": 74,
        "endLine": 76,
        "endChar": 94
      },
      "revId": "34af6a132eacc07018a29eb53da34d88d88a6b6c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71e9636c_82fb8484",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationRemotesUpdater.java",
        "patchSetId": 5
      },
      "lineNbr": 92,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2024-02-21T17:36:53Z",
      "side": 1,
      "message": "nit: Given this method only sets passwords to the `secureStore`, it does not need access to all the `remotes`.\n\nConsider passing only `configs.passwords` rather than the entire `SeparatedRemoveConfigs` object.",
      "range": {
        "startLine": 92,
        "startChar": 2,
        "endLine": 92,
        "endChar": 72
      },
      "revId": "34af6a132eacc07018a29eb53da34d88d88a6b6c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04f406ea_d7057133",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationRemotesUpdater.java",
        "patchSetId": 5
      },
      "lineNbr": 104,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2024-02-21T17:36:53Z",
      "side": 1,
      "message": "Did you mean `SeparatedRemoteConfigs`, as opposed to `Removed`?\n\nI wonder if we need this container at all, can we just not use instantiate `passwords` and `remotes` config separately?",
      "range": {
        "startLine": 104,
        "startChar": 23,
        "endLine": 104,
        "endChar": 45
      },
      "revId": "34af6a132eacc07018a29eb53da34d88d88a6b6c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae900240_5a084f63",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/FanoutConfigResourceTest.java",
        "patchSetId": 5
      },
      "lineNbr": 297,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2024-02-21T17:36:53Z",
      "side": 1,
      "message": "Did you actually mean to save this in the `gerrit.config`?\n\nShouldn\u0027t this be `newReplicationConfig()` [1]?\n\n[1] https://gerrit.googlesource.com/plugins/replication/+/refs/heads/master/src/test/java/com/googlesource/gerrit/plugins/replication/AbstractConfigTest.java#100",
      "range": {
        "startLine": 297,
        "startChar": 49,
        "endLine": 297,
        "endChar": 72
      },
      "revId": "34af6a132eacc07018a29eb53da34d88d88a6b6c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}