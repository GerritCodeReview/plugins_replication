{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "213bf806_fa23ee2a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T19:43:52Z",
      "side": 1,
      "message": "I4e50f923f would help you, reviews accepted",
      "revId": "79b50b0020bfc69d863bbd5811baadec3c8a19d2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "131087d4_2f25fbe4",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 548,
      "author": {
        "id": 4319976
      },
      "writtenOn": "2025-09-24T02:04:24Z",
      "side": 1,
      "message": "From 79b50b0020bfc69d863bbd5811baadec3c8a19d2 Mon Sep 17 00:00:00 2001\nFrom: Antoine Musso \u003chashar@free.fr\u003e\nDate: Thu, 17 Apr 2025 12:37:00 +0200\nSubject: [PATCH] docs/config: document inverted matches cancel each others\n\nOur config had two inverted matches to exclude projects:\n\n  [remote \"github\"]\n    projects \u003d ^(?:(?!apps\\\\/android\\\\/).)*$\n    projects \u003d ^(?:(?!apps\\\\/ios\\\\/).)*$\n\nI have been wondering why `apps/android/wikipedia` is excluded given it\nmatches the first regex. The reason is ReplicationFilter applies each\npattern and when one matches it accepts the project. In this case, the\nproject is matched by the second and is thus accepted.\n\nRef: https://phabricator.wikimedia.org/T392198\nChange-Id: I2846a40d2aabe80c0db305dc4f64dd1aa885b07d\n---\n\ndiff --git a/src/main/resources/Documentation/config.md b/src/main/resources/Documentation/config.md\nindex bb4be9a..b5c4b36 100644\n--- a/src/main/resources/Documentation/config.md\n+++ b/src/main/resources/Documentation/config.md\n@@ -546,10 +546,13 @@\n \tthey do in Gerrit.\n \n \u003ca name\u003d\"remote.NAME.projects\"\u003eremote.NAME.projects\u003c/a\u003e\n-:\tSpecifies which repositories should be replicated to the\n-\tremote. It can be provided more than once, and supports three\n-\tformats: regular expressions, wildcard matching, and single\n-\tproject matching. All three formats match case-sensitive.\n+:\tSpecifies which repositories should be replicated to the remote. It\n+\tcan be provided more than once, if any matches, the repository will\n+\tbe replicated.\n+\n+\tProjects supports three formats: regular expressions, wildcard\n+\tmatching, and single project matching. All three formats match\n+\tcase-sensitive.\n \n \tValues starting with a caret `^` are treated as regular\n \texpressions. `^foo/(bar|baz)` would match the projects\n@@ -559,7 +562,12 @@\n \n \tProjects may be excluded from replication by using a regular\n \texpression with inverse match. `^(?:(?!PATTERN).)* will\n-\texclude any project that matches.\n+\texclude any project that matches. Beware: if another project pattern\n+\tmatches the project, it will be replicated. You can not provide\n+\tmultiple inverted matches since they will cancel each other (a\n+\tproject `foo` would not be matched by `^(?:(?!foo).)* but would be\n+\tmatched if a second inverted match `^(?:(?!bar).)* is also provided\n+\tsince it matches `foo`).\n \n \tValues that are not regular expressions and end in `*` are\n \ttreated as wildcard matches. Wildcards match projects whose\n```suggestion\na name\"remote.NAME.projects remote.NAME.projects a\n```suggestion\na name\"remote.NAME.projects remote.NAME.projects a",
      "revId": "79b50b0020bfc69d863bbd5811baadec3c8a19d2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a8cc679f_686ac8c4",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 548,
      "author": {
        "id": 4319976
      },
      "writtenOn": "2025-09-24T02:26:34Z",
      "side": 1,
      "message": "suggestion\n\u003ca name\u003d\"remote.NAME.projects\"\u003eremote.NAME.projects\u003c/a\u003e",
      "parentUuid": "131087d4_2f25fbe4",
      "revId": "79b50b0020bfc69d863bbd5811baadec3c8a19d2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one maximum vote for label \u0027Code-Review\u0027 is required"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader AND -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"],"atomExplanations":{"value":{"label:Code-Review=MAX,user=non_uploader":"","label:Code-Review=MIN":""}}}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "79b50b0020bfc69d863bbd5811baadec3c8a19d2",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Do-Not-Submit",
        "description": {
          "value": "Changes that have DO NOT SUBMIT in their commit message are not submittable."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:false"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""],"atomExplanations":{"value":{"message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\"":""}}}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[],"atomExplanations":{"value":null}}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "79b50b0020bfc69d863bbd5811baadec3c8a19d2",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "No-Unresolved-Comments",
        "description": {
          "value": "Changes that have unresolved comments are not submittable. Unless overriden by adding the hashtag allow-unresolved-comments."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "has:unresolved"
          }
        },
        "submittabilityExpression": {
          "expressionString": "-has:unresolved"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "hashtag:allow-unresolved-comments"
          }
        },
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"has:unresolved"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["has:unresolved"],"atomExplanations":{"value":{"has:unresolved":""}}}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-has:unresolved"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[],"atomExplanations":{"value":null}}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"hashtag:allow-unresolved-comments"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[],"atomExplanations":{"value":null}}
      },
      "patchSetCommitId": "79b50b0020bfc69d863bbd5811baadec3c8a19d2",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval. Using a trusted device is required, see go/gerrit-onboarding#review-enforcement."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforced_gerrit"],"atomExplanations":{"value":{"is:review-enforced_gerrit":""}}}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[],"atomExplanations":{"value":null}}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "79b50b0020bfc69d863bbd5811baadec3c8a19d2",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI result status for build and tests is passing"
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "-branch:refs/meta/config"
          }
        },
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-branch:refs/meta/config"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["branch:refs/meta/config"],"atomExplanations":{"value":{"branch:refs/meta/config":""}}}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"],"atomExplanations":{"value":{"label:Verified=MAX":"","label:Verified=MIN":""}}}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "79b50b0020bfc69d863bbd5811baadec3c8a19d2",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Want-Code-Review-From-All",
        "description": {
          "value": "A \u0027Code-Review\u0027 vote is required from all human reviewers (service users that are reviewers are ignored)."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "footer:\"Want-Code-Review: all\" -label:Code-Review\u003e\u003d1,users\u003dhuman_reviewers"
          }
        },
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003e\u003d1,users\u003dhuman_reviewers"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"footer:\"Want-Code-Review: all\" -label:Code-Review>=1,users=human_reviewers"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":["label:Code-Review>=1,users=human_reviewers"],"failingAtoms":["footer:\"Want-Code-Review: all\""],"atomExplanations":{"value":{"footer:\"Want-Code-Review: all\"":"","label:Code-Review>=1,users=human_reviewers":""}}}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review>=1,users=human_reviewers"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[],"atomExplanations":{"value":null}}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "79b50b0020bfc69d863bbd5811baadec3c8a19d2",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}