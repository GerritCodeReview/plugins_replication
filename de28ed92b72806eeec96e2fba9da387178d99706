{
  "comments": [
    {
      "key": {
        "uuid": "631ea2bc_073a9498",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 29
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-10T10:52:21Z",
      "side": 1,
      "message": "Should ths be final and be moved in the upper section?",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 54
      },
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a9c8e4f_9f373629",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/AutoReloadRunnable.java",
        "patchSetId": 29
      },
      "lineNbr": 37,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-09-10T10:59:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "631ea2bc_073a9498",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 54
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "37db3490_193b8721",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationModule.java",
        "patchSetId": 29
      },
      "lineNbr": 46,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-10T10:52:21Z",
      "side": 1,
      "message": "Shouldn\u0027t be neccessary.",
      "range": {
        "startLine": 46,
        "startChar": 2,
        "endLine": 46,
        "endChar": 40
      },
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d65f27f_fda7c868",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationModule.java",
        "patchSetId": 29
      },
      "lineNbr": 46,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-09-10T10:59:17Z",
      "side": 1,
      "message": "It is, see my answer below.",
      "parentUuid": "37db3490_193b8721",
      "range": {
        "startLine": 46,
        "startChar": 2,
        "endLine": 46,
        "endChar": 40
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9fbf44c3_30ef3163",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationModule.java",
        "patchSetId": 29
      },
      "lineNbr": 58,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-10T10:52:21Z",
      "side": 1,
      "message": "Can be avoided, if \"gerrit.autoReload\" is set from Test set up.",
      "range": {
        "startLine": 54,
        "startChar": 2,
        "endLine": 58,
        "endChar": 3
      },
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4bf6e6bf_f7e101f1",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/ReplicationModule.java",
        "patchSetId": 29
      },
      "lineNbr": 58,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-09-10T10:59:17Z",
      "side": 1,
      "message": "I tried that also and, unfortunately, the test setup is too late. If you create the configuration in the setup method it doesn\u0027t work as the plugin is already loaded with\nthe default value, that is autoreload \u003d false.",
      "parentUuid": "9fbf44c3_30ef3163",
      "range": {
        "startLine": 54,
        "startChar": 2,
        "endLine": 58,
        "endChar": 3
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f4da8b23_1ecc110f",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/ReplicationIT.java",
        "patchSetId": 29
      },
      "lineNbr": 57,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-10T10:52:21Z",
      "side": 1,
      "message": "This change shouldn\u0027t be necessary, see comment below.",
      "range": {
        "startLine": 57,
        "startChar": 74,
        "endLine": 57,
        "endChar": 97
      },
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a9af5ff_6581f899",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/ReplicationIT.java",
        "patchSetId": 29
      },
      "lineNbr": 57,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-09-10T10:59:17Z",
      "side": 1,
      "message": "It is actually needed, see my reply to your comments.",
      "parentUuid": "f4da8b23_1ecc110f",
      "range": {
        "startLine": 57,
        "startChar": 74,
        "endLine": 57,
        "endChar": 97
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8d59ad99_c1230b10",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/ReplicationIT.java",
        "patchSetId": 29
      },
      "lineNbr": 77,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-10T10:52:21Z",
      "side": 1,
      "message": "Why this has to be passed through new test-only ctor? This can be set through config file (on line 87 beow condifguration file already used):\n\n  config.setBoolean(\"gerrit\", \"autoReload\", true);",
      "range": {
        "startLine": 77,
        "startChar": 47,
        "endLine": 77,
        "endChar": 51
      },
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2d6f3e7_5f7e1b9b",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/ReplicationIT.java",
        "patchSetId": 29
      },
      "lineNbr": 77,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-09-10T10:59:17Z",
      "side": 1,
      "message": "The autoReload flag cannot be switched on and off at runtime because it controls the module injection. If you set autoReload to true at L87, it won\u0027t have any effect.",
      "parentUuid": "8d59ad99_c1230b10",
      "range": {
        "startLine": 77,
        "startChar": 47,
        "endLine": 77,
        "endChar": 51
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f229403_d1335dfe",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/ReplicationIT.java",
        "patchSetId": 29
      },
      "lineNbr": 77,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-10T11:26:44Z",
      "side": 1,
      "message": "Ok, I see. We don\u0027t have any class annotation to populate plugin specific config file per declaration, something that we do support in gerrit core? So what if you populate replication.config with gerrit.autoReload \u003d true here, in confifgure(), prior to calling regular  install(new ReplicationModule(sitePaths)); Would it work then? You would still need a custom Module for the test set up, but you could remove additional ctor in production code.",
      "parentUuid": "b2d6f3e7_5f7e1b9b",
      "range": {
        "startLine": 77,
        "startChar": 47,
        "endLine": 77,
        "endChar": 51
      },
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8d1a294_af6ac752",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/ReplicationIT.java",
        "patchSetId": 29
      },
      "lineNbr": 77,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-10T11:49:37Z",
      "side": 1,
      "message": "In rate-limiter it was done like this: [1].\n\nAnd then global plugin configuration is specified per-test method base:\n\n  @Test\n  @UseLocalDisk\n  @GlobalPluginConfig(\n      pluginName \u003d \"rate-limiter\",\n      name \u003d \"group.limitGroup.uploadpackperhour\",\n      value \u003d \"1\")\n  @GlobalPluginConfig(\n      pluginName \u003d \"rate-limiter\",\n      name \u003d \"configuration.uploadpackLimitExceededMsg\",\n      value \u003d \"Custom message: Limit exceeded ${rateLimit} requests/hour\")\n  [...]\n\n* [1] https://gerrit.googlesource.com/plugins/rate-limiter/+/125f5f8a0b62af92c1eead64db3de9affd8563e1/src/test/java/com/googlesource/gerrit/plugins/ratelimiter/RateLimitUploadPackIT.java#34",
      "parentUuid": "0f229403_d1335dfe",
      "range": {
        "startLine": 77,
        "startChar": 47,
        "endLine": 77,
        "endChar": 51
      },
      "revId": "de28ed92b72806eeec96e2fba9da387178d99706",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}